<? namespace Bitrix\Main\UpdateSystem;
$GLOBALS['____108001747'] = array(base64_decode('aX' . 'N' . 'fd3' . 'JpdGFi' . 'bGU' . '='), base64_decode('Zm' . '9' . 'wZW4='), base64_decode('Zn' . 'dya' . 'XRl'), base64_decode('Zm' . 'N' . 'sb' . '3N' . 'l'), base64_decode('aW50dmFs'), base64_decode('aW5' . '0dmFs'), base64_decode('a' . 'XN' . 'fd3J' . 'pdGFibGU='), base64_decode('Zm9wZW4' . '='), base64_decode('Zn' . 'B1dHM='), base64_decode('Zm' . 'Nsb3Nl'));
if (!function_exists(__NAMESPACE__ . '\\___1831265627')) {
	function ___1831265627($_1042424779)
	{
		static $_1151523672 = false;
		if ($_1151523672 == false) $_1151523672 = array(
			'' . 'RVJS' . 'T1I' . '=', 'R' . 'VJ' . 'S' . 'T' . '1I=', 'X' . '1ZB' . 'TFV' . 'F', 'VW5rbm93b' . 'iB' . 'lcnJvcg=' . '=', 'I' . 'FtBU' . '1' . 'Iw' . 'MV0=', 'UkVO' . 'VA==', 'T' . 'm90I' . 'GZvdW5kIGxp' . 'Y2Vuc2UgaW5mbyBbQVNSMDJd', 'Vj' . 'E' . '=', '' . 'Vj' . 'I=', 'VjE=', 'VjI=', 'U2Vyd' . 'mVyIH' . 'J' . 'lc' . '3Bvbn' . 'NlIGlzI' . 'G5v' . 'dCByZWN' . 'vZ25' . 'p' . 'e' . 'mVkIFtBU0FM' . 'STAxXQ' . '==', 'bWF' . 'p' . 'bg==', 'YWR' . 'ta' . 'W5fcGFzc3' . 'dvcmR' . 'o', 'RE9' . 'DVU1FTlRfUk9' . 'PVA==', 'L2Jp' . 'd' . 'HJpeC9' . 'tb2R1bGVzL21ha' . 'W4vY' . 'WRtaW4=', 'R' . 'E9DVU1FT' . 'lRfUk9' . 'PV' . 'A==', 'L2JpdHJpeC9t' . 'b2R1' . 'b' . 'GV' . 'z' . 'L' . '21haW' . '4vYWR' . 'taW4' . 'v' . 'ZGVmaW5lLnBocA==', 'dw=' . '=', 'P' . 'A==', 'P0RlZml' . 'uZ' . 'SgiVEVNU' . 'E9SQV' . 'JZX0' . 'NBQ0hFIiwgIg=' . '=', '' . 'I' . 'ik7P' . 'w==', 'P' . 'g' . '=' . '=', 'Rml' . 'sZSBvcGVuIGZ' . 'haWx' . 'zIF' . 'tBU' . '0FMSTAyX' . 'Q==', '' . 'Rm9sZ' . 'GV' . 'yIGlzIG5vd' . 'CB3cml0' . 'Y' . 'WJs' . 'ZS' . 'BbQVNB' . 'TEk' . 'wM' . '10=', 'RE' . 'F' . 'URV9UT19TT1V' . 'SQ0U' . '=', '' . 'bWF' . 'pbg==', 'fnN1c' . 'HBvcnRfZm' . 'l' . 'uaXNoX2Rh' . 'dGU=', 'REFURV' . '9' . 'UT1' . '9' . 'TT1VSQ' . '0U=', '' . 'T' . 'UFYX' . '1' . 'N' . 'J' . 'VEVT', 'bWFpb' . 'g==', 'UEFSQU' . '1fT' . 'UFYX1' . 'NJVEVT', 'TUFYX' . '1N' . 'JVEVT', 'TUFY' . 'X1VTRVJT', 'bWFpbg==', '' . 'UEF' . 'SQU1fT' . 'U' . 'FYX1VTRVJT', 'T' . 'UFY' . 'X1VT' . 'R' . 'V' . 'JT', 'TUFY' . 'X1VTRV' . 'JTX1NUUklORw=' . '=', '' . 'b' . 'WFpb' . 'g' . '==', 'flB' . 'BUk' . 'F' . 'NX01BWF9VU0' . 'VSUw==', 'T' . 'UF' . 'YX1V' . 'T' . 'RVJTX' . '1' . 'NUU' . 'klORw==', '' . 'REFURV9UT1' . '9TT' . '1V' . 'SQ' . '0VfU1R' . 'SSU' . '5H', 'bWFpbg==', 'flBB' . 'UkF' . 'NX' . '0ZJTklTSF9EQVR' . 'F', 'REFURV' . '9UT' . '19TT1VSQ' . '0Vf' . 'U1RSS' . 'U5H', 'SVNMQw=' . '=', 'RE9DVU1FTlRf' . 'Uk9PVA=' . '=', 'L2JpdHJpeA==', 'RE9' . 'DVU1FTl' . 'R' . 'fUk' . '9PVA=' . '=', 'L' . '2JpdH' . 'J' . 'peC9saW' . 'N' . 'lbn' . 'NlX2t' . 'leS' . '5waHA=', 'd2' . 'I=', 'P' . 'A==', '' . 'Py' . 'RMSU' . 'NF' . 'TlNFX0t' . 'FWSA9' . 'ICI=', 'I' . 'js' . '/', 'Pg' . '==', 'R' . 'mlsZS' . 'BvcGVuIGZhaWxzI' . 'Ft' . 'BU' . '0FMSTA0XQ=' . '=', 'R' . 'm9sZGVy' . 'IGlzI' . 'G5' . 'vdC' . 'B3cml0' . 'YWJsZSBb' . 'QV' . 'NB' . 'T' . 'Ek' . 'wNV' . '0=', 'T' . 'm' . '90IGZvdW5' . 'k' . 'IGxpY2Vuc2UgaW5mby' . 'BbQVNBSD' . 'A' . 'xX' . 'Q==', '' . 'cmVzdW' . 'x' . '0', 'cm' . 'VzdW' . 'x0', 'ZX' . 'Jyb3' . 'I=', 'bW' . 'Vzc2FnZ' . 'Q==', 'RXJyb3I' . 'gc' . '2' . 'VuZ' . 'CBw' . 'YXJ0bmV' . 'yIG' . 'luZm8' . 'gW0FTU0' . 'lU' . 'U' . 'DAxXQ==', 'c' . 'mVzcG9uc2U=', 'cmVxdWVzd' . 'A==', 'ZXJyb3I' . '=', 'VW5rbm9' . '3' . 'biB' . 'lcnJ' . 'vcg' . '==', 'IFt' . 'BU1NJVFAw' . 'MV0='
		);
		return base64_decode($_1151523672[$_1042424779]);
	}
};

use Bitrix\Main\Application;
use Bitrix\Main\Result;
use Bitrix\Main\Security\SecurityException;
use Bitrix\Main\SystemException;
use Bitrix\Main\Web\Json;

class ActivationSystem
{
	public function reincarnate(Coupon $_1856566385): Result
	{
		$_1246010339 = new ReincarnationRequestBuilder($_1856566385);
		$_1981628340 = (new RequestFactory($_1246010339))->build();
		$_591299158  = $_1981628340->send();
		$_2090073553 = new UpdateServerDataParser($_591299158);
		$_1640032011 = $_2090073553->parse();
		if (isset($_1640032011[___1831265627(0)])) {
			throw new SystemException(($_1640032011[___1831265627(1)][___1831265627(2)] ?? ___1831265627(3)) . ___1831265627(4));
		}
		$_1640032011 = $_1640032011[___1831265627(5)] ?? [];
		if (empty($_1640032011)) {
			throw new SystemException(___1831265627(6));
		}
		$this->applyLicenseInfo($_1640032011, $_1856566385->getKey());
		$_56207193 = new Result();
		return $_56207193->setData($_1640032011);
	}

	protected function applyLicenseInfo(array $_1640032011, string $_1171064020): void
	{
		if (isset($_1640032011[___1831265627(7)], $_1640032011[___1831265627(8)])) {
			$_50487634  = $_1640032011[___1831265627(9)];
			$_197809861 = $_1640032011[___1831265627(10)];
			if (empty($_50487634) || empty($_197809861)) {
				throw new SystemException(___1831265627(11));
			}
			\COption::SetOptionString(___1831265627(12), ___1831265627(13), $_50487634);
			if ($GLOBALS['____108001747'][0]($_SERVER[___1831265627(14)] . ___1831265627(15))) {
				if ($_395512824 = $GLOBALS['____108001747'][1]($_SERVER[___1831265627(16)] . ___1831265627(17), ___1831265627(18))) {
					$GLOBALS['____108001747'][2]($_395512824, ___1831265627(19) . ___1831265627(20) . $_197809861 . ___1831265627(21) . ___1831265627(22));
					$GLOBALS['____108001747'][3]($_395512824);
				} else {
					throw new SystemException(___1831265627(23));
				}
			} else {
				throw new SystemException(___1831265627(24));
			}
		}
		if (isset($_1640032011[___1831265627(25)])) {
			\COption::SetOptionString(___1831265627(26), ___1831265627(27), $_1640032011[___1831265627(28)]);
		}
		if (isset($_1640032011[___1831265627(29)])) {
			\COption::SetOptionString(___1831265627(30), ___1831265627(31), $GLOBALS['____108001747'][4]($_1640032011[___1831265627(32)]));
		}
		if (isset($_1640032011[___1831265627(33)])) {
			\COption::SetOptionString(___1831265627(34), ___1831265627(35), $GLOBALS['____108001747'][5]($_1640032011[___1831265627(36)]));
		}
		if (isset($_1640032011[___1831265627(37)])) {
			\COption::SetOptionString(___1831265627(38), ___1831265627(39), $_1640032011[___1831265627(40)]);
		}
		if (isset($_1640032011[___1831265627(41)])) {
			\COption::SetOptionString(___1831265627(42), ___1831265627(43), $_1640032011[___1831265627(44)]);
		}
		if (isset($_1640032011[___1831265627(45)])) {
			if ($GLOBALS['____108001747'][6]($_SERVER[___1831265627(46)] . ___1831265627(47))) {
				if ($_395512824 = $GLOBALS['____108001747'][7]($_SERVER[___1831265627(48)] . ___1831265627(49), ___1831265627(50))) {
					$GLOBALS['____108001747'][8]($_395512824, ___1831265627(51) . ___1831265627(52) . EscapePHPString($_1171064020) . ___1831265627(53) . ___1831265627(54));
					$GLOBALS['____108001747'][9]($_395512824);
				} else {
					throw new SystemException(___1831265627(55));
				}
			} else {
				throw new SystemException(___1831265627(56));
			}
		}
	}

	public function activateByHash(string $_313737624): Result
	{
		$_2090073553 = new HashCodeParser($_313737624);
		$_1640032011 = $_2090073553->parse();
		if (empty($_1640032011)) {
			throw new SystemException(___1831265627(57));
		}
		$_1171064020 = Application::getInstance()->getLicense()->getKey();
		$this->applyLicenseInfo($_1640032011, $_1171064020);
		$_56207193 = new Result();
		return $_56207193->setData($_1640032011);
	}

	public function sendInfoToPartner(string $_650785112, string $_1913963116, string $_1545482205): Result
	{
		$_1246010339 = new PartnerInfoRequestBuilder($_650785112, $_1913963116, $_1545482205);
		$_1981628340 = (new RequestFactory($_1246010339))->build();
		$_591299158  = $_1981628340->send();
		$_591299158  = Json::decode($_591299158);
		if (!isset($_591299158[___1831265627(58)]) || $_591299158[___1831265627(59)] === ___1831265627(60)) {
			$_408893648 = [___1831265627(61) => ___1831265627(62), ___1831265627(63) => $_591299158, ___1831265627(64) => $_1981628340];
			throw new SystemException(($_591299158[___1831265627(65)] ?? ___1831265627(66)) . ___1831265627(67));
		}
		return (new Result())->setData($_591299158);
	}
} ?>