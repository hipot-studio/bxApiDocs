<? namespace Bitrix\Main;
$GLOBALS['____1522246382'] = array(base64_decode('Z' . 'mlsZV9le' . 'GlzdHM='), base64_decode('c3RydG91c' . 'HBlcg=' . '='), base64_decode('' . 'bW' . 'Q1'), base64_decode('bWQ1'), base64_decode('aW5fYXJyYXk='), base64_decode('aW5fYXJyYXk='), base64_decode('aW5' . 'fYXJ' . 'yYXk='), base64_decode('' . 'ZGV' . 'maW5lZA=='), base64_decode('ZGVmaW5lZA=='), base64_decode('Z' . 'G' . 'VmaW' . '5l' . 'ZA=' . '='), base64_decode('Zm' . 'lsZV9leGlzdHM='), base64_decode('Zml' . 'sZV9l' . 'eG' . 'lz' . 'dHM='), base64_decode('' . 'ZmlsZ' . 'V9l' . 'e' . 'Glzd' . 'HM' . '='), base64_decode('Zmls' . 'ZV9leG' . 'lzdHM='), base64_decode('ZXhwbG9kZQ' . '=' . '='));
if (!function_exists(__NAMESPACE__ . '\\___1503800425')) {
	function ___1503800425($_1463608648)
	{
		static $_433257310 = false;
		if ($_433257310 == false) $_433257310 = array(
			'L2JpdHJpeC9s' . 'a' . 'WNlbnNlX2t' . 'le' . 'S5w' . 'a' . 'H' . 'A=', '', '', '' . 'REV' . 'N' . 'Tw==', '' . 'REVNTw==', 'Q' . 'klUUklY', '' . 'T' . 'ElDRU5D' . 'RQ==', 'REVNT' . 'w==', 'L2' . 'tleV91' . 'c' . 'GRhd' . 'GU' . 'u' . 'cGhwP' . '2xp' . 'Y2Vuc2Vfa2V5PQ' . '=' . '=', 'JnRv' . 'YmFza2V0PXkm' . 'bGF' . 'uZz0=', 'cnU=', '' . 'a3o=', 'Ynk=', 'aHR0' . 'cHM' . '6Ly9kZXYu' . 'MWM' . 'tYml0cml4' . 'LnJ1L2xlYX' . 'Jua' . 'W5nL2' . 'NvdXJzZS' . '9' . 'pb' . 'mRleC5waHA/Q09VUl' . 'NF' . 'X0lEPTEzNSZMRVNTT05fS' . 'UQ9Mj' . 'U3MjA=', 'aHR0cHM6Ly90' . 'cmFpbm' . 'luZy5' . 'i' . 'a' . 'XR' . 'y' . 'aXgyN' . 'C5jb20vc3' . 'VwcG9yd' . 'C' . '90cmFpbm' . 'luZy9jb' . '3' . 'Vyc2U' . 'vaW5kZXgucGhw' . 'P' . '0NPVV' . 'J' . 'TR' . 'V9JRD0' . 'xNzgmT' . 'EVTU09O' . 'X0lE' . 'PTI1OTMyJkx' . 'FU1NPTl' . '9' . 'QQVRIP' . 'TE3NTIw' . 'LjE3NTY' . 'yLjI' . '1OTMwLjI' . '1' . 'OTM' . 'y', 'cnU=', 'Ynk=', 'a3o=', '' . 'ZGU=', 'ZX' . 'U' . '=', 'ZnI=', 'cGw=', 'a' . 'XQ=', 'dWs=', 'Z' . 'X' . 'U=', 'Y29t', 'ZW4=', 'REVNTw==', '' . 'WQ==', 'VEl' . 'NRUxJT' . 'UlUX0' . 'VESVRJT0' . '4=', 'WQ=' . '=', '' . 'RU5DT' . '0' . 'RF', '' . 'WQ==', 'U2l0Z' . 'UV4' . 'c' . 'GlyZURhdGU=', 'bWFpb' . 'g==', 'fnN1cHBvcn' . 'RfZmluaXNoX2RhdGU=', '' . 'WS1tLWQ=', 'W' . 'S1t' . 'LW' . 'Q=', 'Yml0cml' . '4' . 'Mj' . 'Q=', 'bW' . 'Fpbg' . '==', 'f' . 'lBBU' . 'kFNX0NMSUV' . 'OVF9MQU' . '5H', 'aW' . '50cm' . 'FuZXQ=', 'ZW4' . '=', '' . 'c' . 'nU=', 'bWFpbg=' . '=', 'dmV' . 'u' . 'ZG9y', 'dWF' . 'fY' . 'ml0cml4' . 'X' . '3Bv' . 'cn' . 'RhbA==', 'dWE=', 'Yml0c' . 'ml4X3B' . 'v' . 'cn' . 'RhbA==', 'ZW4=', 'MWNf' . 'Yml0cml4X' . '3BvcnRh' . 'b' . 'A==', 'cn' . 'U=', '' . 'L' . '2JpdH' . 'JpeC9tb2R1bGV' . 'zL21haW4vbGFuZy91YQ==', 'dW' . 'E=', 'L2J' . 'pdHJpe' . 'C9tb2R1' . 'b' . 'GVzL21ha' . 'W4vbGF' . 'uZ' . 'y9ieQ==', 'Ynk=', '' . 'L2J' . 'pd' . 'HJpeC9tb' . '2R1' . 'bGVz' . 'L21h' . 'aW4' . 'v' . 'bGF' . 'u' . 'Zy9reg==', 'a3o=', 'L2J' . 'pd' . 'HJpeC' . '9tb2R1' . 'bG' . 'VzL21haW4vbGFuZy9ydQ==', 'cnU=', 'bWFpbg==', 'flBBUkFNX1BBUlROR' . 'VJf' . 'SUQ=', 'bWFpbg=' . '=', 'UE' . 'F' . 'SQU1' . 'fT' . 'UFYX1VTRVJT', 'bWFpbg=' . '=', 'f' . 'kNPVU5UX0VYVF' . 'J' . 'B', 'Tg==', 'WQ==', 'ZX' . 'h0' . 'cmFuZXQ=', 'Q' . 'U5E' . 'IFU' . 'uTE' . 'F' . 'TV' . 'F9MT0' . 'd' . 'JTi' . 'A+IA==', '' . 'QU' . '5EIFUuTE' . 'FTVF9MT0' . 'dJT' . 'iB' . 'JUyBOT1QgTlVMTA==', 'aW50cmF' . 'u' . 'ZXQ=', 'Z' . 'Xh0' . 'cmFu' . 'Z' . 'X' . 'Q=', 'ZXh0cmFu' . 'Z' . 'XR' . 'fZ3JvdXA=', 'bWF' . 'pbg==', 'fmxpY2V' . 'uc2VfbmFtZ' . 'Q==', 'bWFp' . 'b' . 'g=' . '=', '' . 'fmxp' . 'Y2Vuc2' . 'VfY2' . '9k' . 'Z' . 'XM=', '', 'LA=='
		);
		return base64_decode($_433257310[$_1463608648]);
	}
};

use Bitrix\Main\Config\Option;
use Bitrix\Main\Type\Date;

final class License
{
	private ?string $_150611248 = null;
	private const DOMAINS_STORE_LICENSE = ['ru' => 'https://util.1c-bitrix.ru', 'ua' => 'https://util.bitrix.ua', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',];
	public const URL_BUS_EULA = ['ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf', 'ua' => 'https://www.bitrix.ua/download/law/eula_bus.pdf',];
	public const URL_CP_EULA = ['ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',];
	public const URL_RENEWAL_LICENSE = ['com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',];

	public function getKey(): string
	{
		if ($this->_150611248 === null) {
			$_1153066100 = Loader::getDocumentRoot() . ___1503800425(0);
			$LICENSE_KEY = ___1503800425(1);
			if ($GLOBALS['____1522246382'][0]($_1153066100)) {
				include($_1153066100);
			}
			$this->_150611248 = ($LICENSE_KEY == ___1503800425(2) || $GLOBALS['____1522246382'][1]($LICENSE_KEY) == ___1503800425(3) ? ___1503800425(4) : $LICENSE_KEY);
		}
		return $this->_150611248;
	}

	public function getHashLicenseKey(): string
	{
		return $GLOBALS['____1522246382'][2]($this->getKey());
	}

	public function getPublicHashKey(): string
	{
		return $GLOBALS['____1522246382'][3](___1503800425(5) . $this->getKey() . ___1503800425(6));
	}

	public function isDemoKey(): bool
	{
		return $this->getKey() == ___1503800425(7);
	}

	public function getBuyLink(): string
	{
		return $this->getDomainStoreLicense() . ___1503800425(8) . $this->getHashLicenseKey() . ___1503800425(9) . LANGUAGE_ID;
	}

	public function getDocumentationLink(): string
	{
		$_1646042363 = $this->getRegion();
		if ($GLOBALS['____1522246382'][4]($_1646042363, [___1503800425(10), ___1503800425(11), ___1503800425(12)])) {
			return ___1503800425(13);
		}
		return ___1503800425(14);
	}

	public function getRenewalLink(): string
	{
		$_1646042363 = $this->getRegion();
		if ($GLOBALS['____1522246382'][5]($_1646042363, [___1503800425(15), ___1503800425(16), ___1503800425(17), ___1503800425(18)])) {
			return self::URL_RENEWAL_LICENSE[$_1646042363];
		}
		if ($GLOBALS['____1522246382'][6]($_1646042363, [___1503800425(19), ___1503800425(20), ___1503800425(21), ___1503800425(22), ___1503800425(23)])) {
			return self::URL_RENEWAL_LICENSE[___1503800425(24)];
		}
		return self::URL_RENEWAL_LICENSE[___1503800425(25)];
	}

	public function getDomainStoreLicense(): string
	{
		return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___1503800425(26)];
	}

	public function isDemo(): bool
	{
		return $GLOBALS['____1522246382'][7](___1503800425(27)) && DEMO === ___1503800425(28);
	}

	public function isTimeBound(): bool
	{
		return $GLOBALS['____1522246382'][8](___1503800425(29)) && TIMELIMIT_EDITION === ___1503800425(30);
	}

	public function isEncoded(): bool
	{
		return $GLOBALS['____1522246382'][9](___1503800425(31)) && ENCODE === ___1503800425(32);
	}

	public function getExpireDate(): ?Date
	{
		$_621382049 = (int)($GLOBALS[___1503800425(33)] ?? (226 * 2 - 452));
		if ($_621382049 > (1320 / 2 - 660)) {
			return Date::createFromTimestamp($_621382049);
		}
		return null;
	}

	public function getSupportExpireDate(): ?Date
	{
		$_621382049 = Option::get(___1503800425(34), ___1503800425(35));
		if (Date::isCorrect($_621382049, ___1503800425(36))) {
			return new Date($_621382049, ___1503800425(37));
		}
		return null;
	}

	public function getRegion(): ?string
	{
		if (Loader::includeModule(___1503800425(38))) {
			return \CBitrix24::getPortalZone();
		}
		$_1646042363 = Option::get(___1503800425(39), ___1503800425(40));
		if (!empty($_1646042363)) {
			return $_1646042363;
		}
		$_1646042363 = $this->__744829629();
		if (!empty($_1646042363)) {
			return $_1646042363;
		}
		return $this->__752669590();
	}

	public function getEulaLink(): string
	{
		if (ModuleManager::isModuleInstalled(___1503800425(41))) {
			return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___1503800425(42)];
		}
		return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___1503800425(43)];
	}

	private function __744829629(): ?string
	{
		$_281972719 = Option::get(___1503800425(44), ___1503800425(45));
		if ($_281972719 === ___1503800425(46)) {
			return ___1503800425(47);
		}
		if ($_281972719 === ___1503800425(48)) {
			return ___1503800425(49);
		}
		if ($_281972719 === ___1503800425(50)) {
			return ___1503800425(51);
		}
		return null;
	}

	private function __752669590(): ?string
	{
		$_1232160304 = Application::getDocumentRoot();
		if ($GLOBALS['____1522246382'][10]($_1232160304 . ___1503800425(52))) {
			return ___1503800425(53);
		}
		if ($GLOBALS['____1522246382'][11]($_1232160304 . ___1503800425(54))) {
			return ___1503800425(55);
		}
		if ($GLOBALS['____1522246382'][12]($_1232160304 . ___1503800425(56))) {
			return ___1503800425(57);
		}
		if ($GLOBALS['____1522246382'][13]($_1232160304 . ___1503800425(58))) {
			return ___1503800425(59);
		}
		return null;
	}

	public function getPartnerId(): int
	{
		return (int)Option::get(___1503800425(60), ___1503800425(61), (156 * 2 - 312));
	}

	public function getMaxUsers(): int
	{
		return (int)Option::get(___1503800425(62), ___1503800425(63), min(204, 0, 68));
	}

	public function isExtraCountable(): bool
	{
		return Option::get(___1503800425(64), ___1503800425(65), ___1503800425(66)) === ___1503800425(67) && ModuleManager::isModuleInstalled(___1503800425(68));
	}

	public function getActiveUsersCount(Date $_1494560293 = null): int
	{
		$_916719527  = Application::getConnection();
		$_1799268190 = (954 - 2 * 477);
		if ($_1494560293 !== null) {
			$_1142838885 = ___1503800425(69) . $_916719527->getSqlHelper()->convertToDbDate($_1494560293);
		} else {
			$_1142838885 = ___1503800425(70);
		}
		if (ModuleManager::isModuleInstalled(___1503800425(71))) {
			$_100544774  = "
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_1142838885}
			";
			$_1799268190 = (int)$_916719527->queryScalar($_100544774);
			$_1136161728 = (int)Option::get(___1503800425(72), ___1503800425(73));
			if ($_1136161728 > (1268 / 2 - 634) && $this->isExtraCountable()) {
				$_100544774  = "
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1136161728}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_1142838885}
							AND D.VALUE_ID IS NULL
					";
				$_1799268190 += (int)$_916719527->queryScalar($_100544774);
			}
		}
		return $_1799268190;
	}

	public function getName(): string
	{
		return Option::get(___1503800425(74), ___1503800425(75));
	}

	public function getCodes(): array
	{
		$_1475300407 = Option::get(___1503800425(76), ___1503800425(77));
		if ($_1475300407 != ___1503800425(78)) {
			return $GLOBALS['____1522246382'][14](___1503800425(79), $_1475300407);
		}
		return [];
	}
} ?>